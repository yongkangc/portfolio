{{ define "main" }}
<div class="articles-page">
  <!-- Floating Filter Panel -->
  <div class="filter-panel" id="filterPanel">
    <div class="filter-header">
      <h3>Filter by Tags</h3>
      <button class="filter-toggle" id="filterToggle" aria-label="Toggle filters">
        <i class="fas fa-filter"></i>
      </button>
    </div>
    <div class="filter-content" id="filterContent">
      <div class="filter-stats">
        <span class="total-articles">Total: <span id="totalCount">0</span> articles</span>
        <span class="filtered-articles">Showing: <span id="filteredCount">0</span></span>
      </div>
      <div class="tag-filters" id="tagFilters">
        <!-- Tags will be dynamically inserted here -->
      </div>
      <button class="clear-filters" id="clearFilters">Clear All</button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="articles-container">
    <div class="articles-header">
      <h1>Articles</h1>
      <div class="view-controls">
        <button class="view-toggle active" data-view="grid" aria-label="Grid view">
          <i class="fas fa-th"></i>
        </button>
        <button class="view-toggle" data-view="list" aria-label="List view">
          <i class="fas fa-list"></i>
        </button>
      </div>
    </div>

    <!-- Articles Grid -->
    <div class="articles-grid" id="articlesGrid">
      <!-- Recent Articles -->
      {{ range .Site.Data.articles.recent.entries }}
      <article class="article-card" 
               data-tags='{{ jsonify .tags }}' 
               data-date="{{ .date }}">
        <div class="article-card-content">
          <div class="article-card-header">
            <h3><a href="{{ .url }}">{{ .title }}</a></h3>
            <span class="article-date">{{ .date }}</span>
          </div>
          <p class="article-description">{{ .description }}</p>
          {{ with .tags }}
          <div class="article-tags">
            {{ range . }}
            <span class="article-tag" data-tag="{{ . }}">{{ . }}</span>
            {{ end }}
          </div>
          {{ end }}
        </div>
      </article>
      {{ end }}

      <!-- Published Articles -->
      {{ with .Site.Data.articles.published }}
      {{ range .sections }}
        {{ $year := .year }}
        {{ range .entries }}
        <article class="article-card published" 
                 data-tags='{{ jsonify .tags }}' 
                 data-date="{{ .date }}"
                 data-year="{{ $year }}">
          <div class="article-card-content">
            <div class="article-card-header">
              <h3>
                <a href="{{ .url }}" target="_blank" rel="noopener noreferrer">
                  {{ .title }}
                  <i class="fas fa-external-link-alt"></i>
                </a>
              </h3>
              <span class="article-date">{{ .date }}</span>
            </div>
            <p class="article-description">{{ .description }}</p>
            {{ with .tags }}
            <div class="article-tags">
              {{ range . }}
              <span class="article-tag" data-tag="{{ . }}">{{ . }}</span>
              {{ end }}
            </div>
            {{ end }}
            <div class="article-source">
              <i class="fab fa-medium"></i> Published on Medium
            </div>
          </div>
        </article>
        {{ end }}
      {{ end }}
      {{ end }}
    </div>

    <!-- No Results Message -->
    <div class="no-results" id="noResults" style="display: none;">
      <i class="fas fa-search"></i>
      <h3>No articles found</h3>
      <p>Try adjusting your filters or <button id="clearFromEmpty">clear all filters</button></p>
    </div>
  </div>
</div>

<!-- Mobile Filter Button -->
<button class="mobile-filter-btn" id="mobileFilterBtn" aria-label="Open filters">
  <i class="fas fa-filter"></i>
  <span class="filter-badge" id="filterBadge">0</span>
</button>

<script src="/js/articles-filter.js"></script>
{{ end }}